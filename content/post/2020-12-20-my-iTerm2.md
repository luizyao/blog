---
title:       	"æˆ‘çš„ iTerm2 ç»ˆç«¯æ–¹æ¡ˆ"
summary:     	"ä½¿ç”¨ iTerm2 + zsh + starship æ‰“é€ è‡ªå·±çš„ macOS ç»ˆç«¯æ–¹æ¡ˆã€‚"
date:        	2020-12-20
author:      	"Luiz Yao"
tags:        	["macOS", "starship", "iTerm2"]
categories:  	["ç¬”è®°"]
draft: 			false
toc: 			true
featureImage:	"https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-21_19-27-05.png"
---

## iTerm2

### å®‰è£…

[iTerm2](https://iterm2.com/) æ˜¯ macOS çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå®ƒæœ‰æ›´é«˜çš„å¯ç©æ€§ï¼Œé¢œå€¼ä¹Ÿæ›´é«˜ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `homebrew` å®‰è£…å®ƒã€‚

```zsh
$ brew install iterm2
```

### ä¿®æ”¹å­—ä½“

è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ [Fira Code Nerd Font](https://github.com/tonsky/FiraCode) å­—ä½“ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ `homebrew` å®‰è£…ï¼š

```zsh
$ brew tap homebrew/cask-fonts

$ brew install font-fira-code
```

å®‰è£…å®Œæˆåï¼Œä¾æ¬¡é€‰æ‹© **Preferences -> Profiles -> Text -> Font**ï¼Œé€‰æ‹© **Fira Code**ï¼š

![é€‰æ‹© Fira Code å­—ä½“](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_19-17-28.png)

### æ˜¾ç¤º Status Bar

ä¾æ¬¡é€‰æ‹© **Preferences -> Profiles -> Session**ï¼Œå‹¾é€‰ **Status bar enabled**ã€‚

![æ‰“å¼€ Status Bar](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_20-09-51.png)

ç‚¹å‡»æ—è¾¹çš„ **Configure Status Bar**ï¼Œä¾æ¬¡æ‹–æ‹½æƒ³è¦æ˜¾ç¤ºçš„åŠŸèƒ½ï¼š

![é…ç½® Status Bar](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_20-12-27.png)

æœ€åä¾æ¬¡é€‰æ‹© **Preferences -> Appearance**ï¼Œå°† **Status Bar** å›ºå®šåœ¨åº•éƒ¨ï¼Œé»˜è®¤æ˜¯åœ¨é¡¶éƒ¨çš„ã€‚

![å›ºå®š Status Bar åˆ°åº•éƒ¨](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_20-15-13.png) 

ç°åœ¨ï¼Œæ¥çœ‹ä¸€ä¸‹ **Status Bar** çš„æ•ˆæœï¼š

![Status Bar æ•ˆæœ](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_20-18-07.png)

### ä¿®æ”¹ iTerm2 ä¸»é¢˜

ä¾æ¬¡é€‰æ‹© **Preferences -> Appearance**ï¼Œå°† iTerm2 ä¸»é¢˜ä¿®æ”¹ä¸ºè‡ªå¸¦çš„ **Minimal**ï¼š

![ä¿®æ”¹ iTerm2 è‡ªå¸¦ä¸»é¢˜ä¸º Minimal](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-20_20-25-48.png)

### ä¿®æ”¹é…è‰²æ–¹æ¡ˆ

è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ [Snazzy](https://github.com/sindresorhus/iterm2-snazzy)ï¼Œä¸‹è½½å®‰è£…å¯¼å…¥æˆåŠŸåï¼Œä¾æ¬¡é€‰æ‹© **Preferences -> Profiles -> Colors**ï¼Œç‚¹å‡» **Color  Presets**ï¼Œé€‰æ‹© **Snazzy**ï¼š

![é€‰æ‹©é…è‰²æ–¹æ¡ˆ](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-21_05-21-52.png)

## zsh

æˆ‘ç›®å‰ä½¿ç”¨çš„æ˜¯ macOS Big Sur 11.1 ç‰ˆæœ¬ï¼Œzsh ç‰ˆæœ¬æ˜¯ v5.8ã€‚

> ä» macOS Catalina ç‰ˆæœ¬å¼€å§‹ï¼ŒmacOS é»˜è®¤çš„ Shell å·²ç»ç”± bash è½¬å˜æˆäº† zshã€‚

### è®¾ç½® zsh ä¸»é¢˜

### æ’ä»¶

#### zsh-autosuggestions

[zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions) å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¡¥å…¨å‘½ä»¤ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `homebrew` å®‰è£…å®ƒï¼š

```zsh
$ brew install zsh-autosuggestions
```

å°†ä¸‹é¢å‘½ä»¤æ·»åŠ åˆ° `~/.zshrc` æ–‡ä»¶çš„æœ€åé¢ï¼š

```zsh
source /usr/local/share/zsh-autosuggestions/zsh-autosuggestions.zsh
```

æœ€åï¼Œé‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœï¼š

![zsh-autosuggestions æ•ˆæœ](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-21_05-51-45.png)

#### autojump

[autojump](https://github.com/wting/autojump) å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè·³è½¬åˆ°æœŸæœ›çš„ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `homebrew` å®‰è£…å®ƒï¼š

```zsh
$ brew install autojump
```

å°†ä¸‹é¢è¯­å¥æ·»åŠ åˆ° `~/.zshrc` æ–‡ä»¶ä¸­ï¼š

```zsh
[ -f /usr/local/etc/profile.d/autojump.sh ] && . /usr/local/etc/profile.d/autojump.sh
```

æœ€åï¼Œé‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

#### zsh-syntax-highlighting

[zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting) å¯ä»¥ä¸ºå‘½ä»¤è¡Œæä¾›è¯­æ³•é«˜äº®ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `homebrew` å®‰è£…å®ƒï¼š

```zsh
$ brew install zsh-syntax-highlighting
==> Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/zs
######################################################################## 100.0%
==> Pouring zsh-syntax-highlighting-0.7.1.big_sur.bottle.1.tar.gz
==> Caveats
To activate the syntax highlighting, add the following at the end of your .zshrc:
  source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

If you receive "highlighters directory not found" error message,
you may need to add the following to your .zshenv:
  export ZSH_HIGHLIGHT_HIGHLIGHTERS_DIR=/usr/local/share/zsh-syntax-highlighting/highlighters
==> Summary
ğŸº  /usr/local/Cellar/zsh-syntax-highlighting/0.7.1: 27 files, 164.6KB
```

å°†ä¸‹é¢è¯­å¥æ·»åŠ åˆ° `~/.zshrc` æ–‡ä»¶çš„æœ€åï¼š

```zsh
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
```

æœ€åï¼Œé‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

ç°åœ¨ï¼Œçœ‹ä¸€ä¸‹æ•ˆæœï¼š

![zsh-syntax-highlighting æ•ˆæœ](https://gitee.com/luizyao/pictures/raw/master/img/Xnip2020-12-21_06-33-49.png)



## starship

[starship](https://github.com/starship/starship) å¯ä»¥è‡ªå®šä¹‰å„ç§ Shell çš„ç»ˆç«¯æç¤ºç¬¦ï¼Œä¾‹å¦‚ï¼šBashã€PowerShellã€Zsh ç­‰ã€‚

###  å®‰è£…

```zsh
$ brew install starship
```

å°†å¦‚ä¸‹å†…å®¹åŠ å…¥åˆ° `~/.zshrc` æ–‡ä»¶çš„æœ€åï¼š

```zsh
eval "$(starship init zsh)"
```

é‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

### é…ç½®

`starship.toml` æ˜¯ starship çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤å­˜æ”¾åœ¨ `~/.config/` ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šç¯å¢ƒå˜é‡ `STARSHIP_CONFIG` æ¥ä¿®æ”¹å®ƒçš„ä½ç½®ã€‚

è¿™é‡Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰å’Œ starship ç›¸å…³çš„æ–‡ä»¶éƒ½å­˜æ”¾åœ¨ `~/.starship/` ç›®å½•ä¸­ã€‚

æ‰“å¼€ `~/.zshrc` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```zsh
export STARSHIP_CONFIG=~/.starship/starship.toml
```

é‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

åˆ›å»ºä¸€ä¸ªç©ºçš„ `starship.toml` æ–‡ä»¶ï¼š

```zsh
$ mkdir -p ~/.starship && touch ~/.starship/starship.toml
```

> **NOTE**ï¼š
>
> startship  é‡‡ç”¨çš„æ˜¯ [TOML](https://github.com/toml-lang/toml) æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚

ç›®å‰æˆ‘çš„ `starship.toml` æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆå¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„é…ç½®ï¼‰ï¼š

```toml
[git_commit]
  only_detached = false
  tag_symbol = "ğŸ”– "

[python]
  # Only use the `python3` binary to get the version.
  python_binary = "python3"
```

#### Logging

starship é»˜è®¤å°†å‘Šè­¦å’Œé”™è¯¯ä¿¡æ¯å†™å…¥åˆ° `~/.cache/starship/session_${STARSHIP_SESSION_KEY}.log` æ–‡ä»¶ï¼Œå…¶ä¸­ `STARSHIP_SESSION_KEY` å’Œä½ ç›®å‰æ‰“å¼€çš„ç»ˆç«¯å®ä¾‹æœ‰å…³ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š

```zsh
$ echo $STARSHIP_SESSION_KEY
1131127079307995
```

è¿™é‡Œï¼Œæˆ‘ä»¬åŒæ ·å¸Œæœ›å°†å…¶æ”¾åˆ° `~/.starship` ç›®å½•ä¸­ï¼Œä¿®æ”¹ `STARSHIP_CACHE` ç¯å¢ƒå˜é‡ï¼š

æ‰“å¼€ `~/.zshrc` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```zsh
export STARSHIP_CACHE=~/.starship/cache
```

é‡è½½ `~/.zshrc` æ–‡ä»¶ï¼š

```zsh
$ source ~/.zshrc
```

